<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YouTube (Lite)</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>

<div style="display: flex; align-items: center; gap: 10px; padding: 10px;">
  <img src="https://static.wikia.nocookie.net/logo-timeline/images/9/90/YouTube_logo_2005.svg"
       style="height: 30px;"/>
  <input id="searchBox" type="text" placeholder="Search videos..." />
  <button id="searchBtn">Search</button>
</div>

<div id="videos"></div>

<script>
  document.getElementById("searchBtn").onclick = () => {
    const q = document.getElementById("searchBox").value.trim();
    if (q) search(q);
  };

  async function search(query) {
    const r = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
    const data = await r.json();

    const container = document.getElementById("videos");
    container.innerHTML = "";

    if (!data.items) {
      container.innerHTML = "<p>No results.</p>";
      return;
    }

    data.items.forEach(item => {
      const id = item.id.videoId;
      const title = item.snippet.title;

      const wrapper = document.createElement("div");
      wrapper.className = "video-card";

      wrapper.innerHTML = `
        <iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>
        <div class="video-title">${title}</div>
      `;

      container.appendChild(wrapper);
    });
  }
</script>

</body>
</html>
